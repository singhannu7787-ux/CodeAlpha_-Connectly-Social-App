{% extends 'base.html' %}
{% block content %}
<div class="profile-header">
    <img src="{{ user_profile.profile.profile_pic.url }}" alt="Profile picture">
    <h2>@{{ user_profile.username }}</h2>
    <p>{{ user_profile.profile.bio }}</p>
    <p><strong>{{ followers_count }}</strong> Followers | <strong>{{ following_count }}</strong> Following</p>

    {% if user != user_profile %}
        <form action="{% url 'follow_user' user_profile.username %}" method="POST">
            {% csrf_token %}
            {% if is_following %}
                <button class="follow-btn" type="submit">Unfollow</button>
            {% else %}
                <button class="follow-btn" type="submit">Follow</button>
            {% endif %}
        </form>
    {% endif %}
</div>

<hr>

<h3>{{ user_profile.username }}'s Posts</h3>
{% for post in posts %}
<div class="post">
    <p>{{ post.caption }}</p>
    {% if post.image %}
        <img src="{{ post.image.url }}" alt="Post image">
    {% endif %}
</div>
{% empty %}
<p>No posts yet.</p>
{% endfor %}
{% endblock %}
